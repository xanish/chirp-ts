<div class="flex min-h-screen flex-col">
  <app-navbar class="sticky top-0 z-50"></app-navbar>

  <div class="flex flex-grow 2xl:px-64">
    <div class="flex flex-grow lg:w-1/4">
      <app-sidebar></app-sidebar>
    </div>

    <section
      class="my-2 flex flex-col items-center gap-2 lg:w-1/2"
      infiniteScroll
      (scrolled)="nextPage()"
    >
      <app-user-details
        [user]="user"
        (toggleFollow)="handleFollowAction($event)"
      ></app-user-details>

      <div
        class="flex w-full flex-row items-center justify-evenly rounded-md bg-white shadow-sm"
      >
        <button
          type="button"
          (click)="tabChange(tabType.TWEETS)"
          class="w-full p-4 text-sm uppercase leading-6"
          [ngClass]="{
            'border-b-2 border-indigo-600 font-semibold text-indigo-600':
              tab === tabType.TWEETS
          }"
        >
          Tweets
        </button>
        <button
          type="button"
          (click)="tabChange(tabType.REPLIES)"
          class="w-full p-4 text-sm uppercase leading-6"
          [ngClass]="{
            'border-b-2 border-indigo-600 font-semibold text-indigo-600':
              tab === tabType.REPLIES
          }"
        >
          Replies
        </button>
        <button
          type="button"
          (click)="tabChange(tabType.MEDIA)"
          class="w-full p-4 text-sm uppercase leading-6"
          [ngClass]="{
            'border-b-2 border-indigo-600 font-semibold text-indigo-600':
              tab === tabType.MEDIA
          }"
        >
          Media
        </button>
        <button
          type="button"
          (click)="tabChange(tabType.LIKES)"
          class="w-full p-4 text-sm uppercase leading-6"
          [ngClass]="{
            'border-b-2 border-indigo-600 font-semibold text-indigo-600':
              tab === tabType.LIKES
          }"
        >
          Likes
        </button>
      </div>

      <div *ngIf="tab === tabType.TWEETS" class="flex w-full flex-col gap-2">
        <ng-container *ngIf="tweets.length > 0">
          <ng-template ngFor let-tweet [ngForOf]="tweets">
            <app-tweet
              [tweet]="tweet"
              (toggleLike)="objectLiked($event, 'TWEET')"
              (showAttachment)="showLightbox($event)"
            ></app-tweet>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="tweets.length === 0">
          <div class="mt-10 flex w-full flex-col items-center justify-center">
            <h3 class="font-display text-3xl text-gray-500">
              Nothing to see here
            </h3>
          </div>
        </ng-container>
      </div>

      <div *ngIf="tab === tabType.REPLIES" class="flex w-full flex-col gap-2">
        <ng-container *ngIf="replies.length > 0">
          <ng-template ngFor let-reply [ngForOf]="replies">
            <app-tweet
              [tweet]="reply"
              (toggleLike)="objectLiked($event, 'REPLY')"
              (showAttachment)="showLightbox($event)"
            ></app-tweet>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="replies.length === 0">
          <div class="mt-10 flex w-full flex-col items-center justify-center">
            <h3 class="font-display text-3xl text-gray-500">
              Nothing to see here
            </h3>
          </div>
        </ng-container>
      </div>

      <div *ngIf="tab === tabType.MEDIA" class="flex w-full flex-col gap-2">
        <ng-container *ngIf="medias.length > 0">
          <ng-template ngFor let-media [ngForOf]="medias">
            <app-tweet
              [tweet]="media"
              (toggleLike)="objectLiked($event, 'MEDIA')"
              (showAttachment)="showLightbox($event)"
            ></app-tweet>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="medias.length === 0">
          <div class="mt-10 flex w-full flex-col items-center justify-center">
            <h3 class="font-display text-3xl text-gray-500">
              Nothing to see here
            </h3>
          </div>
        </ng-container>
      </div>

      <div *ngIf="tab === tabType.LIKES" class="flex w-full flex-col gap-2">
        <ng-container *ngIf="likes.length > 0">
          <ng-template ngFor let-like [ngForOf]="likes">
            <app-tweet
              [tweet]="like"
              (toggleLike)="objectLiked($event, 'LIKE')"
              (showAttachment)="showLightbox($event)"
            ></app-tweet>
          </ng-template>
        </ng-container>

        <ng-container *ngIf="likes.length === 0">
          <div class="mt-10 flex w-full flex-col items-center justify-center">
            <h3 class="font-display text-3xl text-gray-500">
              Nothing to see here
            </h3>
          </div>
        </ng-container>
      </div>
    </section>

    <aside class="mx-6 lg:w-1/4">
      <app-suggested-follows
        [suggestions]="suggestedFollows"
        (toggleFollow)="handleIfCurrentUserFollowAction($event)"
      ></app-suggested-follows>
    </aside>
  </div>
</div>

<app-lightbox
  *ngIf="lightbox.show"
  [attachments]="lightbox.attachments"
  [startAt]="lightbox.startAt"
  (close)="closeLightbox()"
></app-lightbox>
